# IsolationForest example

An example using `IsolationForest` for anomaly detection.

The IsolationForest ‘isolates’ observations by randomly selecting a feature
and then randomly selecting a split value between the maximum and minimum
values of the selected feature.

Since recursive partitioning can be represented by a tree structure, the
number of splittings required to isolate a sample is equivalent to the path
length from the root node to the terminating node.

This path length, averaged over a forest of such random trees, is a measure of
normality and our decision function.

Random partitioning produces noticeable shorter paths for anomalies. Hence,
when a forest of random trees collectively produce shorter path lengths for
particular samples, they are highly likely to be anomalies.

![IsolationForest](data:image/png;base64,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)

    
    print(__doc__)
    
    import numpy as np
    import matplotlib.pyplot as plt
    from sklearn.ensemble import IsolationForest
    
    rng = np.random.RandomState(42)
    
    # Generate train data
    X = 0.3 * rng.randn(100, 2)
    X_train = np.r_[X + 2, X - 2]
    # Generate some regular novel observations
    X = 0.3 * rng.randn(20, 2)
    X_test = np.r_[X + 2, X - 2]
    # Generate some abnormal novel observations
    X_outliers = rng.uniform(low=-4, high=4, size=(20, 2))
    
    # fit the model
    clf = IsolationForest(max_samples=100, random_state=rng)
    clf.fit(X_train)
    y_pred_train = clf.predict(X_train)
    y_pred_test = clf.predict(X_test)
    y_pred_outliers = clf.predict(X_outliers)
    
    # plot the line, the samples, and the nearest vectors to the plane
    xx, yy = np.meshgrid(np.linspace(-5, 5, 50), np.linspace(-5, 5, 50))
    Z = clf.decision_function(np.c_[xx.ravel(), yy.ravel()])
    Z = Z.reshape(xx.shape)
    
    plt.title("IsolationForest")
    plt.contourf(xx, yy, Z, cmap=plt.cm.Blues_r)
    
    b1 = plt.scatter(X_train[:, 0], X_train[:, 1], c='white',
                     s=20, edgecolor='k')
    b2 = plt.scatter(X_test[:, 0], X_test[:, 1], c='green',
                     s=20, edgecolor='k')
    c = plt.scatter(X_outliers[:, 0], X_outliers[:, 1], c='red',
                    s=20, edgecolor='k')
    plt.axis('tight')
    plt.xlim((-5, 5))
    plt.ylim((-5, 5))
    plt.legend([b1, b2, c],
               ["training observations",
                "new regular observations", "new abnormal observations"],
               loc="upper left")
    plt.show()
    
Total running time of the script: ( 0 minutes 0.770 seconds)

![Launch
binder](data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAAUCAMAAACwC0NtAAABWVBMVEW7u7vo6OjCwsLMzMzz8/P4+Pju7u68vLzd3d24uLjx8fHm5ubT09PAwMDJycnPz8+urq7Ly8va2tq5ubnq6uqSkpLBwcH09PS6urrypVmvr6/i4uLDw8O0tLSjo6PX19e9u7pYm8qxsbGrq6u+vr7s7OzZ2dng4OCVlZXk5OTIyMiWlpampqaoqKj6+vrGxsagoKC9vb2ZmZn29vb///+Nq8Kzs7PSspNlnshfnsr2o1HnZYHXc46dnZ2Li4vS0tKPj4+3t7fOtJm2urztpmKGqsTarYFcmsnTjZzkaYXOl6Kqtr7lqnHEqrD1olLMmqW+t7jWsIzGt6hrnsbQk6Gis7/IoavgbIfhcoprlcHYaom+oH2Elq50kLzV1dWHh4fDuK2Xr8GZsMDHtqatsLrglH/sfm60pLHKqqDWnJHJcJDtgWzoknG8dJaLqr/0lVqeo7jlbX7owswW4TTQAAACXklEQVRIx+3V52/iMBgH4DcsBwfCCCkhQICMS4G0AQKUXqFpumh7Pa57l9t7//9fzlRHWeXbCemkvpEs+ZWtR/rZVqAKj/WvK7u+v7m/np2RdpjokG9pNthRIrF0dJjYfDWLGM/ed76dAWx31v923NS0tWXvRCtD90bTN9Sy1Ona3u6Hp1939+Cw04/SRU9bizwTLTbUG9OtoRZGU7Hn5xefEz9/Nz9tJt4ONDOGky7Q52AuCbStYRvKOmZcyENjKjWqPYnFdZSiQbd9vhCkyMyDUBQzBbC7WmhMe7Gyk92+vrm9ud7ODjRKLQZoiKmgakBTRcULdKboZlDVXMtERzWvMU915xhgknwag2auRaook2/JlhqKi+EJ7QR+5NqX7XYNBtq8wtIZYFQoUxAtc2ELsORIYbS4AGpgLEnZqetqHpKOIGLVKwnSIqIKrKkVIm6FG09y9+Jj4/Z789fy8rOBlsddd7enBYlGDt0Cyw+CiDwcmGOaDRC808ix+lRysIKFtG4g4IKIe/JK7qycf7kicW7l3txrQS9fYomWAptoqZ6mu8HEvVsyrmkIomxPCxLNwQVgSZKpkkT7I6HJa3Jw0rxq7h3AVu71veaPMfkkNlmc1PuaEs/HOYSJZo9qOo5pRl8D0aI0DRkeBnedhzSAd5fHpxunjfskw0Xg5YV5w9+qiBUeigrASxD5esXgVgGM1shmg68srDkyT7aAfxUUXuFXuTovSxWQSg++gq3c8nE7VxvqcOE6iA6kRRD6LSecfvgNObIwPBOFu/3y1De3UWvkGrWNx9/T/1B/AFudUABdgF9sAAAAAElFTkSuQmCC)

`Download Python source code: plot_isolation_forest.py`

`Download Jupyter notebook: plot_isolation_forest.ipynb`

© 2007–2020 The scikit-learn developers  
Licensed under the 3-clause BSD License.  
https://scikit-
learn.org/0.24/auto_examples/ensemble/plot_isolation_forest.html

