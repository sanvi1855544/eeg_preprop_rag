<h1 id="sphx-glr-auto-examples-compose-plot-digits-pipe-py">Pipelining: chaining a PCA and a logistic regression</h1> <p>The PCA does an unsupervised dimensionality reduction, while the logistic regression does the prediction.</p> <p>We use a GridSearchCV to set the dimensionality of the PCA</p> <img alt="plot digits pipe" class="sphx-glr-single-img" src="data:image/png;base64,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"> <p class="sphx-glr-script-out">Out:</p> <pre data-language="none">Best parameter (CV score=0.920):
{'logistic__C': 0.046415888336127774, 'pca__n_components': 45}
</pre>  <pre data-language="python">print(__doc__)


# Code source: Gaël Varoquaux
# Modified for documentation by Jaques Grobler
# License: BSD 3 clause


import numpy as np
import matplotlib.pyplot as plt
import pandas as pd

from sklearn import datasets
from sklearn.decomposition import PCA
from sklearn.linear_model import LogisticRegression
from sklearn.pipeline import Pipeline
from sklearn.model_selection import GridSearchCV


# Define a pipeline to search for the best combination of PCA truncation
# and classifier regularization.
pca = PCA()
# set the tolerance to a large value to make the example faster
logistic = LogisticRegression(max_iter=10000, tol=0.1)
pipe = Pipeline(steps=[('pca', pca), ('logistic', logistic)])

X_digits, y_digits = datasets.load_digits(return_X_y=True)

# Parameters of pipelines can be set using ‘__’ separated parameter names:
param_grid = {
    'pca__n_components': [5, 15, 30, 45, 64],
    'logistic__C': np.logspace(-4, 4, 4),
}
search = GridSearchCV(pipe, param_grid, n_jobs=-1)
search.fit(X_digits, y_digits)
print("Best parameter (CV score=%0.3f):" % search.best_score_)
print(search.best_params_)

# Plot the PCA spectrum
pca.fit(X_digits)

fig, (ax0, ax1) = plt.subplots(nrows=2, sharex=True, figsize=(6, 6))
ax0.plot(np.arange(1, pca.n_components_ + 1),
         pca.explained_variance_ratio_, '+', linewidth=2)
ax0.set_ylabel('PCA explained variance ratio')

ax0.axvline(search.best_estimator_.named_steps['pca'].n_components,
            linestyle=':', label='n_components chosen')
ax0.legend(prop=dict(size=12))

# For each number of components, find the best classifier results
results = pd.DataFrame(search.cv_results_)
components_col = 'param_pca__n_components'
best_clfs = results.groupby(components_col).apply(
    lambda g: g.nlargest(1, 'mean_test_score'))

best_clfs.plot(x=components_col, y='mean_test_score', yerr='std_test_score',
               legend=False, ax=ax1)
ax1.set_ylabel('Classification accuracy (val)')
ax1.set_xlabel('n_components')

plt.xlim(-1, 70)

plt.tight_layout()
plt.show()
</pre> <p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes 11.811 seconds)</p> <div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-compose-plot-digits-pipe-py"> <div class="binder-badge docutils container"> <a class="reference external image-reference" href="https://mybinder.org/v2/gh/scikit-learn/scikit-learn/0.24.X?urlpath=lab/tree/notebooks/auto_examples/compose/plot_digits_pipe.ipynb"><img alt="Launch binder" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG0AAAAUCAMAAACwC0NtAAABWVBMVEW7u7vo6OjCwsLMzMzz8/P4+Pju7u68vLzd3d24uLjx8fHm5ubT09PAwMDJycnPz8+urq7Ly8va2tq5ubnq6uqSkpLBwcH09PS6urrypVmvr6/i4uLDw8O0tLSjo6PX19e9u7pYm8qxsbGrq6u+vr7s7OzZ2dng4OCVlZXk5OTIyMiWlpampqaoqKj6+vrGxsagoKC9vb2ZmZn29vb///+Nq8Kzs7PSspNlnshfnsr2o1HnZYHXc46dnZ2Li4vS0tKPj4+3t7fOtJm2urztpmKGqsTarYFcmsnTjZzkaYXOl6Kqtr7lqnHEqrD1olLMmqW+t7jWsIzGt6hrnsbQk6Gis7/IoavgbIfhcoprlcHYaom+oH2Elq50kLzV1dWHh4fDuK2Xr8GZsMDHtqatsLrglH/sfm60pLHKqqDWnJHJcJDtgWzoknG8dJaLqr/0lVqeo7jlbX7owswW4TTQAAACXklEQVRIx+3V52/iMBgH4DcsBwfCCCkhQICMS4G0AQKUXqFpumh7Pa57l9t7//9fzlRHWeXbCemkvpEs+ZWtR/rZVqAKj/WvK7u+v7m/np2RdpjokG9pNthRIrF0dJjYfDWLGM/ed76dAWx31v923NS0tWXvRCtD90bTN9Sy1Ona3u6Hp1939+Cw04/SRU9bizwTLTbUG9OtoRZGU7Hn5xefEz9/Nz9tJt4ONDOGky7Q52AuCbStYRvKOmZcyENjKjWqPYnFdZSiQbd9vhCkyMyDUBQzBbC7WmhMe7Gyk92+vrm9ud7ODjRKLQZoiKmgakBTRcULdKboZlDVXMtERzWvMU915xhgknwag2auRaook2/JlhqKi+EJ7QR+5NqX7XYNBtq8wtIZYFQoUxAtc2ELsORIYbS4AGpgLEnZqetqHpKOIGLVKwnSIqIKrKkVIm6FG09y9+Jj4/Z789fy8rOBlsddd7enBYlGDt0Cyw+CiDwcmGOaDRC808ix+lRysIKFtG4g4IKIe/JK7qycf7kicW7l3txrQS9fYomWAptoqZ6mu8HEvVsyrmkIomxPCxLNwQVgSZKpkkT7I6HJa3Jw0rxq7h3AVu71veaPMfkkNlmc1PuaEs/HOYSJZo9qOo5pRl8D0aI0DRkeBnedhzSAd5fHpxunjfskw0Xg5YV5w9+qiBUeigrASxD5esXgVgGM1shmg68srDkyT7aAfxUUXuFXuTovSxWQSg++gq3c8nE7VxvqcOE6iA6kRRD6LSecfvgNObIwPBOFu/3y1De3UWvkGrWNx9/T/1B/AFudUABdgF9sAAAAAElFTkSuQmCC" style="width: 150px;"></a> </div> <div class="sphx-glr-download sphx-glr-download-python docutils container"> <p><a class="reference download internal" download="" href="https://scikit-learn.org/0.24/_downloads/ba89a400c6902f85c10199ff86947d23/plot_digits_pipe.py"><code>Download Python source code: plot_digits_pipe.py</code></a></p> </div> <div class="sphx-glr-download sphx-glr-download-jupyter docutils container"> <p><a class="reference download internal" download="" href="https://scikit-learn.org/0.24/_downloads/898b30acf62919d918478efbe526195f/plot_digits_pipe.ipynb"><code>Download Jupyter notebook: plot_digits_pipe.ipynb</code></a></p> </div> </div><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007&ndash;2020 The scikit-learn developers<br>Licensed under the 3-clause BSD License.<br>
    <a href="https://scikit-learn.org/0.24/auto_examples/compose/plot_digits_pipe.html" class="_attribution-link">https://scikit-learn.org/0.24/auto_examples/compose/plot_digits_pipe.html</a>
  </p>
</div>
