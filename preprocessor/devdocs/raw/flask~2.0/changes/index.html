<h1>Changes</h1>  <h2 id="version-2-0-1">Version 2.0.1</h2> <p>Unreleased</p> <ul class="simple"> <li>Re-add the <code>filename</code> parameter in <code>send_from_directory</code>. The <code>filename</code> parameter has been renamed to <code>path</code>, the old name is deprecated. <a class="reference external" href="https://github.com/pallets/flask/pull/4019">#4019</a>
</li> </ul>   <h2 id="version-2-0-0">Version 2.0.0</h2> <p>Released 2021-05-11</p> <ul class="simple"> <li>Drop support for Python 2 and 3.5.</li> <li>Bump minimum versions of other Pallets projects: Werkzeug &gt;= 2, Jinja2 &gt;= 3, MarkupSafe &gt;= 2, ItsDangerous &gt;= 2, Click &gt;= 8. Be sure to check the change logs for each project. For better compatibility with other applications (e.g. Celery) that still require Click 7, there is no hard dependency on Click 8 yet, but using Click 7 will trigger a DeprecationWarning and Flask 2.1 will depend on Click 8.</li> <li>JSON support no longer uses simplejson. To use another JSON module, override <code>app.json_encoder</code> and <code>json_decoder</code>. <a class="reference external" href="https://github.com/pallets/flask/issues/3555">#3555</a>
</li> <li>The <code>encoding</code> option to JSON functions is deprecated. <a class="reference external" href="https://github.com/pallets/flask/pull/3562">#3562</a>
</li> <li>Passing <code>script_info</code> to app factory functions is deprecated. This was not portable outside the <code>flask</code> command. Use <code>click.get_current_context().obj</code> if it’s needed. <a class="reference external" href="https://github.com/pallets/flask/issues/3552">#3552</a>
</li> <li>The CLI shows better error messages when the app failed to load when looking up commands. <a class="reference external" href="https://github.com/pallets/flask/issues/2741">#2741</a>
</li> <li>Add <a class="reference internal" href="../api/index#flask.sessions.SessionInterface.get_cookie_name" title="flask.sessions.SessionInterface.get_cookie_name"><code>sessions.SessionInterface.get_cookie_name()</code></a> to allow setting the session cookie name dynamically. <a class="reference external" href="https://github.com/pallets/flask/pull/3369">#3369</a>
</li> <li>Add <a class="reference internal" href="../api/index#flask.Config.from_file" title="flask.Config.from_file"><code>Config.from_file()</code></a> to load config using arbitrary file loaders, such as <code>toml.load</code> or <code>json.load</code>. <code>Config.from_json()</code> is deprecated in favor of this. <a class="reference external" href="https://github.com/pallets/flask/pull/3398">#3398</a>
</li> <li>The <code>flask run</code> command will only defer errors on reload. Errors present during the initial call will cause the server to exit with the traceback immediately. <a class="reference external" href="https://github.com/pallets/flask/issues/3431">#3431</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.send_file" title="flask.send_file"><code>send_file()</code></a> raises a <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#ValueError" title="(in Python v3.9)"><code>ValueError</code></a> when passed an <a class="reference external" href="https://docs.python.org/3/library/io.html#module-io" title="(in Python v3.9)"><code>io</code></a> object in text mode. Previously, it would respond with 200 OK and an empty file. <a class="reference external" href="https://github.com/pallets/flask/issues/3358">#3358</a>
</li> <li>When using ad-hoc certificates, check for the cryptography library instead of PyOpenSSL. <a class="reference external" href="https://github.com/pallets/flask/pull/3492">#3492</a>
</li> <li>When specifying a factory function with <code>FLASK_APP</code>, keyword argument can be passed. <a class="reference external" href="https://github.com/pallets/flask/issues/3553">#3553</a>
</li> <li>When loading a <code>.env</code> or <code>.flaskenv</code> file, the current working directory is no longer changed to the location of the file. <a class="reference external" href="https://github.com/pallets/flask/pull/3560">#3560</a>
</li> <li>When returning a <code>(response, headers)</code> tuple from a view, the headers replace rather than extend existing headers on the response. For example, this allows setting the <code>Content-Type</code> for <code>jsonify()</code>. Use <code>response.headers.extend()</code> if extending is desired. <a class="reference external" href="https://github.com/pallets/flask/issues/3628">#3628</a>
</li> <li>The <code>Scaffold</code> class provides a common API for the <code>Flask</code> and <code>Blueprint</code> classes. <code>Blueprint</code> information is stored in attributes just like <code>Flask</code>, rather than opaque lambda functions. This is intended to improve consistency and maintainability. <a class="reference external" href="https://github.com/pallets/flask/issues/3215">#3215</a>
</li> <li>Include <code>samesite</code> and <code>secure</code> options when removing the session cookie. <a class="reference external" href="https://github.com/pallets/flask/pull/3726">#3726</a>
</li> <li>Support passing a <code>pathlib.Path</code> to <code>static_folder</code>. <a class="reference external" href="https://github.com/pallets/flask/pull/3579">#3579</a>
</li> <li>
<code>send_file</code> and <code>send_from_directory</code> are wrappers around the implementations in <code>werkzeug.utils</code>. <a class="reference external" href="https://github.com/pallets/flask/pull/3828">#3828</a>
</li> <li>Some <code>send_file</code> parameters have been renamed, the old names are deprecated. <code>attachment_filename</code> is renamed to <code>download_name</code>. <code>cache_timeout</code> is renamed to <code>max_age</code>. <code>add_etags</code> is renamed to <code>etag</code>. <a class="reference external" href="https://github.com/pallets/flask/pull/3828">#3828</a>, <a class="reference external" href="https://github.com/pallets/flask/pull/3883">#3883</a>
</li> <li>
<code>send_file</code> passes <code>download_name</code> even if <code>as_attachment=False</code> by using <code>Content-Disposition: inline</code>. <a class="reference external" href="https://github.com/pallets/flask/pull/3828">#3828</a>
</li> <li>
<code>send_file</code> sets <code>conditional=True</code> and <code>max_age=None</code> by default. <code>Cache-Control</code> is set to <code>no-cache</code> if <code>max_age</code> is not set, otherwise <code>public</code>. This tells browsers to validate conditional requests instead of using a timed cache. <a class="reference external" href="https://github.com/pallets/flask/pull/3828">#3828</a>
</li> <li>
<code>helpers.safe_join</code> is deprecated. Use <code>werkzeug.utils.safe_join</code> instead. <a class="reference external" href="https://github.com/pallets/flask/pull/3828">#3828</a>
</li> <li>The request context does route matching before opening the session. This could allow a session interface to change behavior based on <code>request.endpoint</code>. <a class="reference external" href="https://github.com/pallets/flask/issues/3776">#3776</a>
</li> <li>Use Jinja’s implementation of the <code>|tojson</code> filter. <a class="reference external" href="https://github.com/pallets/flask/issues/3881">#3881</a>
</li> <li>Add route decorators for common HTTP methods. For example, <code>@app.post("/login")</code> is a shortcut for <code>@app.route("/login", methods=["POST"])</code>. <a class="reference external" href="https://github.com/pallets/flask/pull/3907">#3907</a>
</li> <li>Support async views, error handlers, before and after request, and teardown functions. <a class="reference external" href="https://github.com/pallets/flask/pull/3412">#3412</a>
</li> <li>Support nesting blueprints. <a class="reference external" href="https://github.com/pallets/flask/issues/593">#593</a>, <a class="reference external" href="https://github.com/pallets/flask/issues/1548">#1548</a>, <a class="reference external" href="https://github.com/pallets/flask/pull/3923">#3923</a>
</li> <li>Set the default encoding to “UTF-8” when loading <code>.env</code> and <code>.flaskenv</code> files to allow to use non-ASCII characters. <a class="reference external" href="https://github.com/pallets/flask/issues/3931">#3931</a>
</li> <li>
<code>flask shell</code> sets up tab and history completion like the default <code>python</code> shell if <code>readline</code> is installed. <a class="reference external" href="https://github.com/pallets/flask/issues/3941">#3941</a>
</li> <li>
<code>helpers.total_seconds()</code> is deprecated. Use <code>timedelta.total_seconds()</code> instead. <a class="reference external" href="https://github.com/pallets/flask/pull/3962">#3962</a>
</li> <li>Add type hinting. <a class="reference external" href="https://github.com/pallets/flask/pull/3973">#3973</a>.</li> </ul>   <h2 id="version-1-1-2">Version 1.1.2</h2> <p>Released 2020-04-03</p> <ul class="simple"> <li>Work around an issue when running the <code>flask</code> command with an external debugger on Windows. <a class="reference external" href="https://github.com/pallets/flask/issues/3297">#3297</a>
</li> <li>The static route will not catch all URLs if the <code>Flask</code> <code>static_folder</code> argument ends with a slash. <a class="reference external" href="https://github.com/pallets/flask/issues/3452">#3452</a>
</li> </ul>   <h2 id="version-1-1-1">Version 1.1.1</h2> <p>Released 2019-07-08</p> <ul class="simple"> <li>The <code>flask.json_available</code> flag was added back for compatibility with some extensions. It will raise a deprecation warning when used, and will be removed in version 2.0.0. <a class="reference external" href="https://github.com/pallets/flask/issues/3288">#3288</a>
</li> </ul>   <h2 id="version-1-1-0">Version 1.1.0</h2> <p>Released 2019-07-04</p> <ul class="simple"> <li>Bump minimum Werkzeug version to &gt;= 0.15.</li> <li>Drop support for Python 3.4.</li> <li>
<p>Error handlers for <code>InternalServerError</code> or <code>500</code> will always be passed an instance of <code>InternalServerError</code>. If they are invoked due to an unhandled exception, that original exception is now available as <code>e.original_exception</code> rather than being passed directly to the handler. The same is true if the handler is for the base <code>HTTPException</code>. This makes error handler behavior more consistent. <a class="reference external" href="https://github.com/pallets/flask/pull/3266">#3266</a></p> <ul> <li>
<code>Flask.finalize_request()</code> is called for all unhandled exceptions even if there is no <code>500</code> error handler.</li> </ul> </li> <li>
<a class="reference internal" href="../api/index#flask.Flask.logger" title="flask.Flask.logger"><code>Flask.logger</code></a> takes the same name as <a class="reference internal" href="../api/index#flask.Flask.name" title="flask.Flask.name"><code>Flask.name</code></a> (the value passed as <code>Flask(import_name)</code>. This reverts 1.0’s behavior of always logging to <code>"flask.app"</code>, in order to support multiple apps in the same process. A warning will be shown if old configuration is detected that needs to be moved. <a class="reference external" href="https://github.com/pallets/flask/issues/2866">#2866</a>
</li> <li>
<code>flask.RequestContext.copy()</code> includes the current session object in the request context copy. This prevents <code>session</code> pointing to an out-of-date object. <a class="reference external" href="https://github.com/pallets/flask/issues/2935">#2935</a>
</li> <li>Using built-in RequestContext, unprintable Unicode characters in Host header will result in a HTTP 400 response and not HTTP 500 as previously. <a class="reference external" href="https://github.com/pallets/flask/pull/2994">#2994</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.send_file" title="flask.send_file"><code>send_file()</code></a> supports <a class="reference external" href="https://docs.python.org/3/library/os.html#os.PathLike" title="(in Python v3.9)"><code>PathLike</code></a> objects as described in PEP 0519, to support <a class="reference external" href="https://docs.python.org/3/library/pathlib.html#module-pathlib" title="(in Python v3.9)"><code>pathlib</code></a> in Python 3. <a class="reference external" href="https://github.com/pallets/flask/pull/3059">#3059</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.send_file" title="flask.send_file"><code>send_file()</code></a> supports <a class="reference external" href="https://docs.python.org/3/library/io.html#io.BytesIO" title="(in Python v3.9)"><code>BytesIO</code></a> partial content. <a class="reference external" href="https://github.com/pallets/flask/issues/2957">#2957</a>
</li> <li>
<code>open_resource()</code> accepts the “rt” file mode. This still does the same thing as “r”. <a class="reference external" href="https://github.com/pallets/flask/issues/3163">#3163</a>
</li> <li>The <code>MethodView.methods</code> attribute set in a base class is used by subclasses. <a class="reference external" href="https://github.com/pallets/flask/issues/3138">#3138</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.Flask.jinja_options" title="flask.Flask.jinja_options"><code>Flask.jinja_options</code></a> is a <code>dict</code> instead of an <code>ImmutableDict</code> to allow easier configuration. Changes must still be made before creating the environment. <a class="reference external" href="https://github.com/pallets/flask/pull/3190">#3190</a>
</li> <li>Flask’s <code>JSONMixin</code> for the request and response wrappers was moved into Werkzeug. Use Werkzeug’s version with Flask-specific support. This bumps the Werkzeug dependency to &gt;= 0.15. <a class="reference external" href="https://github.com/pallets/flask/issues/3125">#3125</a>
</li> <li>The <code>flask</code> command entry point is simplified to take advantage of Werkzeug 0.15’s better reloader support. This bumps the Werkzeug dependency to &gt;= 0.15. <a class="reference external" href="https://github.com/pallets/flask/issues/3022">#3022</a>
</li> <li>Support <code>static_url_path</code> that ends with a forward slash. <a class="reference external" href="https://github.com/pallets/flask/issues/3134">#3134</a>
</li> <li>Support empty <code>static_folder</code> without requiring setting an empty <code>static_url_path</code> as well. <a class="reference external" href="https://github.com/pallets/flask/pull/3124">#3124</a>
</li> <li>
<code>jsonify()</code> supports <code>dataclasses.dataclass</code> objects. <a class="reference external" href="https://github.com/pallets/flask/pull/3195">#3195</a>
</li> <li>Allow customizing the <a class="reference internal" href="../api/index#flask.Flask.url_map_class" title="flask.Flask.url_map_class"><code>Flask.url_map_class</code></a> used for routing. <a class="reference external" href="https://github.com/pallets/flask/pull/3069">#3069</a>
</li> <li>The development server port can be set to 0, which tells the OS to pick an available port. <a class="reference external" href="https://github.com/pallets/flask/issues/2926">#2926</a>
</li> <li>The return value from <a class="reference internal" href="../api/index#flask.cli.load_dotenv" title="flask.cli.load_dotenv"><code>cli.load_dotenv()</code></a> is more consistent with the documentation. It will return <code>False</code> if python-dotenv is not installed, or if the given path isn’t a file. <a class="reference external" href="https://github.com/pallets/flask/issues/2937">#2937</a>
</li> <li>Signaling support has a stub for the <code>connect_via</code> method when the Blinker library is not installed. <a class="reference external" href="https://github.com/pallets/flask/pull/3208">#3208</a>
</li> <li>Add an <code>--extra-files</code> option to the <code>flask run</code> CLI command to specify extra files that will trigger the reloader on change. <a class="reference external" href="https://github.com/pallets/flask/issues/2897">#2897</a>
</li> <li>Allow returning a dictionary from a view function. Similar to how returning a string will produce a <code>text/html</code> response, returning a dict will call <code>jsonify</code> to produce a <code>application/json</code> response. <a class="reference external" href="https://github.com/pallets/flask/pull/3111">#3111</a>
</li> <li>Blueprints have a <code>cli</code> Click group like <code>app.cli</code>. CLI commands registered with a blueprint will be available as a group under the <code>flask</code> command. <a class="reference external" href="https://github.com/pallets/flask/issues/1357">#1357</a>.</li> <li>When using the test client as a context manager (<code>with client:</code>), all preserved request contexts are popped when the block exits, ensuring nested contexts are cleaned up correctly. <a class="reference external" href="https://github.com/pallets/flask/pull/3157">#3157</a>
</li> <li>Show a better error message when the view return type is not supported. <a class="reference external" href="https://github.com/pallets/flask/issues/3214">#3214</a>
</li> <li>
<code>flask.testing.make_test_environ_builder()</code> has been deprecated in favour of a new class <code>flask.testing.EnvironBuilder</code>. <a class="reference external" href="https://github.com/pallets/flask/pull/3232">#3232</a>
</li> <li>The <code>flask run</code> command no longer fails if Python is not built with SSL support. Using the <code>--cert</code> option will show an appropriate error message. <a class="reference external" href="https://github.com/pallets/flask/issues/3211">#3211</a>
</li> <li>URL matching now occurs after the request context is pushed, rather than when it’s created. This allows custom URL converters to access the app and request contexts, such as to query a database for an id. <a class="reference external" href="https://github.com/pallets/flask/issues/3088">#3088</a>
</li> </ul>   <h2 id="version-1-0-4">Version 1.0.4</h2> <p>Released 2019-07-04</p> <ul class="simple"> <li>The key information for <code>BadRequestKeyError</code> is no longer cleared outside debug mode, so error handlers can still access it. This requires upgrading to Werkzeug 0.15.5. <a class="reference external" href="https://github.com/pallets/flask/issues/3249">#3249</a>
</li> <li>
<code>send_file</code> url quotes the “:” and “/” characters for more compatible UTF-8 filename support in some browsers. <a class="reference external" href="https://github.com/pallets/flask/issues/3074">#3074</a>
</li> <li>Fixes for PEP451 import loaders and pytest 5.x. <a class="reference external" href="https://github.com/pallets/flask/issues/3275">#3275</a>
</li> <li>Show message about dotenv on stderr instead of stdout. <a class="reference external" href="https://github.com/pallets/flask/issues/3285">#3285</a>
</li> </ul>   <h2 id="version-1-0-3">Version 1.0.3</h2> <p>Released 2019-05-17</p> <ul class="simple"> <li>
<a class="reference internal" href="../api/index#flask.send_file" title="flask.send_file"><code>send_file()</code></a> encodes filenames as ASCII instead of Latin-1 (ISO-8859-1). This fixes compatibility with Gunicorn, which is stricter about header encodings than PEP 3333. <a class="reference external" href="https://github.com/pallets/flask/issues/2766">#2766</a>
</li> <li>Allow custom CLIs using <code>FlaskGroup</code> to set the debug flag without it always being overwritten based on environment variables. <a class="reference external" href="https://github.com/pallets/flask/pull/2765">#2765</a>
</li> <li>
<code>flask --version</code> outputs Werkzeug’s version and simplifies the Python version. <a class="reference external" href="https://github.com/pallets/flask/pull/2825">#2825</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.send_file" title="flask.send_file"><code>send_file()</code></a> handles an <code>attachment_filename</code> that is a native Python 2 string (bytes) with UTF-8 coded bytes. <a class="reference external" href="https://github.com/pallets/flask/issues/2933">#2933</a>
</li> <li>A catch-all error handler registered for <code>HTTPException</code> will not handle <code>RoutingException</code>, which is used internally during routing. This fixes the unexpected behavior that had been introduced in 1.0. <a class="reference external" href="https://github.com/pallets/flask/pull/2986">#2986</a>
</li> <li>Passing the <code>json</code> argument to <code>app.test_client</code> does not push/pop an extra app context. <a class="reference external" href="https://github.com/pallets/flask/issues/2900">#2900</a>
</li> </ul>   <h2 id="version-1-0-2">Version 1.0.2</h2> <p>Released 2018-05-02</p> <ul class="simple"> <li>Fix more backwards compatibility issues with merging slashes between a blueprint prefix and route. <a class="reference external" href="https://github.com/pallets/flask/pull/2748">#2748</a>
</li> <li>Fix error with <code>flask routes</code> command when there are no routes. <a class="reference external" href="https://github.com/pallets/flask/issues/2751">#2751</a>
</li> </ul>   <h2 id="version-1-0-1">Version 1.0.1</h2> <p>Released 2018-04-29</p> <ul class="simple"> <li>Fix registering partials (with no <code>__name__</code>) as view functions. <a class="reference external" href="https://github.com/pallets/flask/pull/2730">#2730</a>
</li> <li>Don’t treat lists returned from view functions the same as tuples. Only tuples are interpreted as response data. <a class="reference external" href="https://github.com/pallets/flask/issues/2736">#2736</a>
</li> <li>Extra slashes between a blueprint’s <code>url_prefix</code> and a route URL are merged. This fixes some backwards compatibility issues with the change in 1.0. <a class="reference external" href="https://github.com/pallets/flask/issues/2731">#2731</a>, <a class="reference external" href="https://github.com/pallets/flask/issues/2742">#2742</a>
</li> <li>Only trap <code>BadRequestKeyError</code> errors in debug mode, not all <code>BadRequest</code> errors. This allows <code>abort(400)</code> to continue working as expected. <a class="reference external" href="https://github.com/pallets/flask/issues/2735">#2735</a>
</li> <li>The <code>FLASK_SKIP_DOTENV</code> environment variable can be set to <code>1</code> to skip automatically loading dotenv files. <a class="reference external" href="https://github.com/pallets/flask/issues/2722">#2722</a>
</li> </ul>   <h2 id="version-1-0">Version 1.0</h2> <p>Released 2018-04-26</p> <ul class="simple"> <li>Python 2.6 and 3.3 are no longer supported.</li> <li>Bump minimum dependency versions to the latest stable versions: Werkzeug &gt;= 0.14, Jinja &gt;= 2.10, itsdangerous &gt;= 0.24, Click &gt;= 5.1. <a class="reference external" href="https://github.com/pallets/flask/issues/2586">#2586</a>
</li> <li>Skip <a class="reference internal" href="../api/index#flask.Flask.run" title="flask.Flask.run"><code>app.run</code></a> when a Flask application is run from the command line. This avoids some behavior that was confusing to debug.</li> <li>Change the default for <a class="reference internal" href="../config/index#JSONIFY_PRETTYPRINT_REGULAR" title="JSONIFY_PRETTYPRINT_REGULAR"><code>JSONIFY_PRETTYPRINT_REGULAR</code></a> to <code>False</code>. <a class="reference internal" href="../api/index#flask.json.jsonify" title="flask.json.jsonify"><code>jsonify()</code></a> returns a compact format by default, and an indented format in debug mode. <a class="reference external" href="https://github.com/pallets/flask/pull/2193">#2193</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.Flask" title="flask.Flask"><code>Flask.__init__</code></a> accepts the <code>host_matching</code> argument and sets it on <a class="reference internal" href="../api/index#flask.Flask.url_map" title="flask.Flask.url_map"><code>url_map</code></a>. <a class="reference external" href="https://github.com/pallets/flask/issues/1559">#1559</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.Flask" title="flask.Flask"><code>Flask.__init__</code></a> accepts the <code>static_host</code> argument and passes it as the <code>host</code> argument when defining the static route. <a class="reference external" href="https://github.com/pallets/flask/issues/1559">#1559</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.send_file" title="flask.send_file"><code>send_file()</code></a> supports Unicode in <code>attachment_filename</code>. <a class="reference external" href="https://github.com/pallets/flask/pull/2223">#2223</a>
</li> <li>Pass <code>_scheme</code> argument from <a class="reference internal" href="../api/index#flask.url_for" title="flask.url_for"><code>url_for()</code></a> to <a class="reference internal" href="../api/index#flask.Flask.handle_url_build_error" title="flask.Flask.handle_url_build_error"><code>handle_url_build_error()</code></a>. <a class="reference external" href="https://github.com/pallets/flask/pull/2017">#2017</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.Flask.add_url_rule" title="flask.Flask.add_url_rule"><code>add_url_rule()</code></a> accepts the <code>provide_automatic_options</code> argument to disable adding the <code>OPTIONS</code> method. <a class="reference external" href="https://github.com/pallets/flask/pull/1489">#1489</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.views.MethodView" title="flask.views.MethodView"><code>MethodView</code></a> subclasses inherit method handlers from base classes. <a class="reference external" href="https://github.com/pallets/flask/pull/1936">#1936</a>
</li> <li>Errors caused while opening the session at the beginning of the request are handled by the app’s error handlers. <a class="reference external" href="https://github.com/pallets/flask/pull/2254">#2254</a>
</li> <li>Blueprints gained <a class="reference internal" href="../api/index#flask.Blueprint.json_encoder" title="flask.Blueprint.json_encoder"><code>json_encoder</code></a> and <a class="reference internal" href="../api/index#flask.Blueprint.json_decoder" title="flask.Blueprint.json_decoder"><code>json_decoder</code></a> attributes to override the app’s encoder and decoder. <a class="reference external" href="https://github.com/pallets/flask/pull/1898">#1898</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.Flask.make_response" title="flask.Flask.make_response"><code>Flask.make_response()</code></a> raises <code>TypeError</code> instead of <code>ValueError</code> for bad response types. The error messages have been improved to describe why the type is invalid. <a class="reference external" href="https://github.com/pallets/flask/pull/2256">#2256</a>
</li> <li>Add <code>routes</code> CLI command to output routes registered on the application. <a class="reference external" href="https://github.com/pallets/flask/pull/2259">#2259</a>
</li> <li>Show warning when session cookie domain is a bare hostname or an IP address, as these may not behave properly in some browsers, such as Chrome. <a class="reference external" href="https://github.com/pallets/flask/pull/2282">#2282</a>
</li> <li>Allow IP address as exact session cookie domain. <a class="reference external" href="https://github.com/pallets/flask/pull/2282">#2282</a>
</li> <li>
<code>SESSION_COOKIE_DOMAIN</code> is set if it is detected through <code>SERVER_NAME</code>. <a class="reference external" href="https://github.com/pallets/flask/pull/2282">#2282</a>
</li> <li>Auto-detect zero-argument app factory called <code>create_app</code> or <code>make_app</code> from <code>FLASK_APP</code>. <a class="reference external" href="https://github.com/pallets/flask/pull/2297">#2297</a>
</li> <li>Factory functions are not required to take a <code>script_info</code> parameter to work with the <code>flask</code> command. If they take a single parameter or a parameter named <code>script_info</code>, the <a class="reference internal" href="../api/index#flask.cli.ScriptInfo" title="flask.cli.ScriptInfo"><code>ScriptInfo</code></a> object will be passed. <a class="reference external" href="https://github.com/pallets/flask/pull/2319">#2319</a>
</li> <li>
<code>FLASK_APP</code> can be set to an app factory, with arguments if needed, for example <code>FLASK_APP=myproject.app:create_app('dev')</code>. <a class="reference external" href="https://github.com/pallets/flask/pull/2326">#2326</a>
</li> <li>
<code>FLASK_APP</code> can point to local packages that are not installed in editable mode, although <code>pip install -e</code> is still preferred. <a class="reference external" href="https://github.com/pallets/flask/pull/2414">#2414</a>
</li> <li>The <a class="reference internal" href="../api/index#flask.views.View" title="flask.views.View"><code>View</code></a> class attribute <a class="reference internal" href="../api/index#flask.views.View.provide_automatic_options" title="flask.views.View.provide_automatic_options"><code>provide_automatic_options</code></a> is set in <a class="reference internal" href="../api/index#flask.views.View.as_view" title="flask.views.View.as_view"><code>as_view()</code></a>, to be detected by <a class="reference internal" href="../api/index#flask.Flask.add_url_rule" title="flask.Flask.add_url_rule"><code>add_url_rule()</code></a>. <a class="reference external" href="https://github.com/pallets/flask/pull/2316">#2316</a>
</li> <li>Error handling will try handlers registered for <code>blueprint, code</code>, <code>app, code</code>, <code>blueprint, exception</code>, <code>app, exception</code>. <a class="reference external" href="https://github.com/pallets/flask/pull/2314">#2314</a>
</li> <li>
<code>Cookie</code> is added to the response’s <code>Vary</code> header if the session is accessed at all during the request (and not deleted). <a class="reference external" href="https://github.com/pallets/flask/pull/2288">#2288</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.Flask.test_request_context" title="flask.Flask.test_request_context"><code>test_request_context()</code></a> accepts <code>subdomain</code> and <code>url_scheme</code> arguments for use when building the base URL. <a class="reference external" href="https://github.com/pallets/flask/pull/1621">#1621</a>
</li> <li>Set <a class="reference internal" href="../config/index#APPLICATION_ROOT" title="APPLICATION_ROOT"><code>APPLICATION_ROOT</code></a> to <code>'/'</code> by default. This was already the implicit default when it was set to <code>None</code>.</li> <li>
<a class="reference internal" href="../config/index#TRAP_BAD_REQUEST_ERRORS" title="TRAP_BAD_REQUEST_ERRORS"><code>TRAP_BAD_REQUEST_ERRORS</code></a> is enabled by default in debug mode. <code>BadRequestKeyError</code> has a message with the bad key in debug mode instead of the generic bad request message. <a class="reference external" href="https://github.com/pallets/flask/pull/2348">#2348</a>
</li> <li>Allow registering new tags with <a class="reference internal" href="../api/index#flask.json.tag.TaggedJSONSerializer" title="flask.json.tag.TaggedJSONSerializer"><code>TaggedJSONSerializer</code></a> to support storing other types in the session cookie. <a class="reference external" href="https://github.com/pallets/flask/pull/2352">#2352</a>
</li> <li>Only open the session if the request has not been pushed onto the context stack yet. This allows <a class="reference internal" href="../api/index#flask.stream_with_context" title="flask.stream_with_context"><code>stream_with_context()</code></a> generators to access the same session that the containing view uses. <a class="reference external" href="https://github.com/pallets/flask/pull/2354">#2354</a>
</li> <li>Add <code>json</code> keyword argument for the test client request methods. This will dump the given object as JSON and set the appropriate content type. <a class="reference external" href="https://github.com/pallets/flask/pull/2358">#2358</a>
</li> <li>Extract JSON handling to a mixin applied to both the <a class="reference internal" href="../api/index#flask.Request" title="flask.Request"><code>Request</code></a> and <a class="reference internal" href="../api/index#flask.Response" title="flask.Response"><code>Response</code></a> classes. This adds the <a class="reference internal" href="../api/index#flask.Response.is_json" title="flask.Response.is_json"><code>is_json()</code></a> and <a class="reference internal" href="../api/index#flask.Response.get_json" title="flask.Response.get_json"><code>get_json()</code></a> methods to the response to make testing JSON response much easier. <a class="reference external" href="https://github.com/pallets/flask/pull/2358">#2358</a>
</li> <li>Removed error handler caching because it caused unexpected results for some exception inheritance hierarchies. Register handlers explicitly for each exception if you want to avoid traversing the MRO. <a class="reference external" href="https://github.com/pallets/flask/pull/2362">#2362</a>
</li> <li>Fix incorrect JSON encoding of aware, non-UTC datetimes. <a class="reference external" href="https://github.com/pallets/flask/pull/2374">#2374</a>
</li> <li>Template auto reloading will honor debug mode even even if <a class="reference internal" href="../api/index#flask.Flask.jinja_env" title="flask.Flask.jinja_env"><code>jinja_env</code></a> was already accessed. <a class="reference external" href="https://github.com/pallets/flask/pull/2373">#2373</a>
</li> <li>
<p>The following old deprecated code was removed. <a class="reference external" href="https://github.com/pallets/flask/issues/2385">#2385</a></p> <ul> <li>
<code>flask.ext</code> - import extensions directly by their name instead of through the <code>flask.ext</code> namespace. For example, <code>import flask.ext.sqlalchemy</code> becomes <code>import flask_sqlalchemy</code>.</li> <li>
<code>Flask.init_jinja_globals</code> - extend <a class="reference internal" href="../api/index#flask.Flask.create_jinja_environment" title="flask.Flask.create_jinja_environment"><code>Flask.create_jinja_environment()</code></a> instead.</li> <li>
<code>Flask.error_handlers</code> - tracked by <a class="reference internal" href="../api/index#flask.Flask.error_handler_spec" title="flask.Flask.error_handler_spec"><code>Flask.error_handler_spec</code></a>, use <a class="reference internal" href="../api/index#flask.Flask.errorhandler" title="flask.Flask.errorhandler"><code>Flask.errorhandler()</code></a> to register handlers.</li> <li>
<code>Flask.request_globals_class</code> - use <a class="reference internal" href="../api/index#flask.Flask.app_ctx_globals_class" title="flask.Flask.app_ctx_globals_class"><code>Flask.app_ctx_globals_class</code></a> instead.</li> <li>
<code>Flask.static_path</code> - use <a class="reference internal" href="../api/index#flask.Flask.static_url_path" title="flask.Flask.static_url_path"><code>Flask.static_url_path</code></a> instead.</li> <li>
<code>Request.module</code> - use <a class="reference internal" href="../api/index#flask.Request.blueprint" title="flask.Request.blueprint"><code>Request.blueprint</code></a> instead.</li> </ul> </li> <li>The <a class="reference internal" href="../api/index#flask.Request.json" title="flask.Request.json"><code>Request.json</code></a> property is no longer deprecated. <a class="reference external" href="https://github.com/pallets/flask/issues/1421">#1421</a>
</li> <li>Support passing a <a class="reference external" href="https://werkzeug.palletsprojects.com/en/2.0.x/test/#werkzeug.test.EnvironBuilder" title="(in Werkzeug v2.0.x)"><code>EnvironBuilder</code></a> or <code>dict</code> to <a class="reference external" href="https://werkzeug.palletsprojects.com/en/2.0.x/test/#werkzeug.test.Client.open" title="(in Werkzeug v2.0.x)"><code>test_client.open</code></a>. <a class="reference external" href="https://github.com/pallets/flask/pull/2412">#2412</a>
</li> <li>The <code>flask</code> command and <a class="reference internal" href="../api/index#flask.Flask.run" title="flask.Flask.run"><code>Flask.run()</code></a> will load environment variables from <code>.env</code> and <code>.flaskenv</code> files if python-dotenv is installed. <a class="reference external" href="https://github.com/pallets/flask/pull/2416">#2416</a>
</li> <li>When passing a full URL to the test client, the scheme in the URL is used instead of <a class="reference internal" href="../config/index#PREFERRED_URL_SCHEME" title="PREFERRED_URL_SCHEME"><code>PREFERRED_URL_SCHEME</code></a>. <a class="reference external" href="https://github.com/pallets/flask/pull/2430">#2430</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.Flask.logger" title="flask.Flask.logger"><code>Flask.logger</code></a> has been simplified. <code>LOGGER_NAME</code> and <code>LOGGER_HANDLER_POLICY</code> config was removed. The logger is always named <code>flask.app</code>. The level is only set on first access, it doesn’t check <a class="reference internal" href="../api/index#flask.Flask.debug" title="flask.Flask.debug"><code>Flask.debug</code></a> each time. Only one format is used, not different ones depending on <a class="reference internal" href="../api/index#flask.Flask.debug" title="flask.Flask.debug"><code>Flask.debug</code></a>. No handlers are removed, and a handler is only added if no handlers are already configured. <a class="reference external" href="https://github.com/pallets/flask/pull/2436">#2436</a>
</li> <li>Blueprint view function names may not contain dots. <a class="reference external" href="https://github.com/pallets/flask/pull/2450">#2450</a>
</li> <li>Fix a <code>ValueError</code> caused by invalid <code>Range</code> requests in some cases. <a class="reference external" href="https://github.com/pallets/flask/issues/2526">#2526</a>
</li> <li>The development server uses threads by default. <a class="reference external" href="https://github.com/pallets/flask/pull/2529">#2529</a>
</li> <li>Loading config files with <code>silent=True</code> will ignore <a class="reference external" href="https://docs.python.org/3/library/errno.html#errno.ENOTDIR" title="(in Python v3.9)"><code>ENOTDIR</code></a> errors. <a class="reference external" href="https://github.com/pallets/flask/pull/2581">#2581</a>
</li> <li>Pass <code>--cert</code> and <code>--key</code> options to <code>flask run</code> to run the development server over HTTPS. <a class="reference external" href="https://github.com/pallets/flask/pull/2606">#2606</a>
</li> <li>Added <a class="reference internal" href="../config/index#SESSION_COOKIE_SAMESITE" title="SESSION_COOKIE_SAMESITE"><code>SESSION_COOKIE_SAMESITE</code></a> to control the <code>SameSite</code> attribute on the session cookie. <a class="reference external" href="https://github.com/pallets/flask/pull/2607">#2607</a>
</li> <li>Added <a class="reference internal" href="../api/index#flask.Flask.test_cli_runner" title="flask.Flask.test_cli_runner"><code>test_cli_runner()</code></a> to create a Click runner that can invoke Flask CLI commands for testing. <a class="reference external" href="https://github.com/pallets/flask/pull/2636">#2636</a>
</li> <li>Subdomain matching is disabled by default and setting <a class="reference internal" href="../config/index#SERVER_NAME" title="SERVER_NAME"><code>SERVER_NAME</code></a> does not implicitly enable it. It can be enabled by passing <code>subdomain_matching=True</code> to the <code>Flask</code> constructor. <a class="reference external" href="https://github.com/pallets/flask/pull/2635">#2635</a>
</li> <li>A single trailing slash is stripped from the blueprint <code>url_prefix</code> when it is registered with the app. <a class="reference external" href="https://github.com/pallets/flask/pull/2629">#2629</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.Request.get_json" title="flask.Request.get_json"><code>Request.get_json()</code></a> doesn’t cache the result if parsing fails when <code>silent</code> is true. <a class="reference external" href="https://github.com/pallets/flask/issues/2651">#2651</a>
</li> <li>
<a class="reference internal" href="../api/index#flask.Request.get_json" title="flask.Request.get_json"><code>Request.get_json()</code></a> no longer accepts arbitrary encodings. Incoming JSON should be encoded using UTF-8 per <a class="rfc reference external" href="https://tools.ietf.org/html/rfc8259.html" id="index-0"><strong>RFC 8259</strong></a>, but Flask will autodetect UTF-8, -16, or -32. <a class="reference external" href="https://github.com/pallets/flask/pull/2691">#2691</a>
</li> <li>Added <a class="reference internal" href="../config/index#MAX_COOKIE_SIZE" title="MAX_COOKIE_SIZE"><code>MAX_COOKIE_SIZE</code></a> and <a class="reference internal" href="../api/index#flask.Response.max_cookie_size" title="flask.Response.max_cookie_size"><code>Response.max_cookie_size</code></a> to control when Werkzeug warns about large cookies that browsers may ignore. <a class="reference external" href="https://github.com/pallets/flask/pull/2693">#2693</a>
</li> <li>Updated documentation theme to make docs look better in small windows. <a class="reference external" href="https://github.com/pallets/flask/pull/2709">#2709</a>
</li> <li>Rewrote the tutorial docs and example project to take a more structured approach to help new users avoid common pitfalls. <a class="reference external" href="https://github.com/pallets/flask/pull/2676">#2676</a>
</li> </ul>   <h2 id="version-0-12-5">Version 0.12.5</h2> <p>Released 2020-02-10</p> <ul class="simple"> <li>Pin Werkzeug to &lt; 1.0.0. <a class="reference external" href="https://github.com/pallets/flask/issues/3497">#3497</a>
</li> </ul>   <h2 id="version-0-12-4">Version 0.12.4</h2> <p>Released 2018-04-29</p> <ul class="simple"> <li>Repackage 0.12.3 to fix package layout issue. <a class="reference external" href="https://github.com/pallets/flask/issues/2728">#2728</a>
</li> </ul>   <h2 id="version-0-12-3">Version 0.12.3</h2> <p>Released 2018-04-26</p> <ul class="simple"> <li>
<a class="reference internal" href="../api/index#flask.Request.get_json" title="flask.Request.get_json"><code>Request.get_json()</code></a> no longer accepts arbitrary encodings. Incoming JSON should be encoded using UTF-8 per <a class="rfc reference external" href="https://tools.ietf.org/html/rfc8259.html" id="index-1"><strong>RFC 8259</strong></a>, but Flask will autodetect UTF-8, -16, or -32. <a class="reference external" href="https://github.com/pallets/flask/issues/2692">#2692</a>
</li> <li>Fix a Python warning about imports when using <code>python -m flask</code>. <a class="reference external" href="https://github.com/pallets/flask/issues/2666">#2666</a>
</li> <li>Fix a <code>ValueError</code> caused by invalid <code>Range</code> requests in some cases.</li> </ul>   <h2 id="version-0-12-2">Version 0.12.2</h2> <p>Released 2017-05-16</p> <ul class="simple"> <li>Fix a bug in <code>safe_join</code> on Windows.</li> </ul>   <h2 id="version-0-12-1">Version 0.12.1</h2> <p>Released 2017-03-31</p> <ul class="simple"> <li>Prevent <code>flask run</code> from showing a <code>NoAppException</code> when an <code>ImportError</code> occurs within the imported application module.</li> <li>Fix encoding behavior of <code>app.config.from_pyfile</code> for Python 3. <a class="reference external" href="https://github.com/pallets/flask/issues/2118">#2118</a>
</li> <li>Use the <code>SERVER_NAME</code> config if it is present as default values for <code>app.run</code>. <a class="reference external" href="https://github.com/pallets/flask/issues/2109">#2109</a>, <a class="reference external" href="https://github.com/pallets/flask/pull/2152">#2152</a>
</li> <li>Call <code>ctx.auto_pop</code> with the exception object instead of <code>None</code>, in the event that a <code>BaseException</code> such as <code>KeyboardInterrupt</code> is raised in a request handler.</li> </ul>   <h2 id="version-0-12">Version 0.12</h2> <p>Released 2016-12-21, codename Punsch</p> <ul class="simple"> <li>The cli command now responds to <code>--version</code>.</li> <li>Mimetype guessing and ETag generation for file-like objects in <code>send_file</code> has been removed. <a class="reference external" href="https://github.com/pallets/flask/issues/104">#104</a>, :pr`1849`</li> <li>Mimetype guessing in <code>send_file</code> now fails loudly and doesn’t fall back to <code>application/octet-stream</code>. <a class="reference external" href="https://github.com/pallets/flask/pull/1988">#1988</a>
</li> <li>Make <code>flask.safe_join</code> able to join multiple paths like <code>os.path.join</code> <a class="reference external" href="https://github.com/pallets/flask/pull/1730">#1730</a>
</li> <li>Revert a behavior change that made the dev server crash instead of returning an Internal Server Error. <a class="reference external" href="https://github.com/pallets/flask/pull/2006">#2006</a>
</li> <li>Correctly invoke response handlers for both regular request dispatching as well as error handlers.</li> <li>Disable logger propagation by default for the app logger.</li> <li>Add support for range requests in <code>send_file</code>.</li> <li>
<code>app.test_client</code> includes preset default environment, which can now be directly set, instead of per <code>client.get</code>.</li> <li>Fix crash when running under PyPy3. <a class="reference external" href="https://github.com/pallets/flask/pull/1814">#1814</a>
</li> </ul>   <h2 id="version-0-11-1">Version 0.11.1</h2> <p>Released 2016-06-07</p> <ul class="simple"> <li>Fixed a bug that prevented <code>FLASK_APP=foobar/__init__.py</code> from working. <a class="reference external" href="https://github.com/pallets/flask/pull/1872">#1872</a>
</li> </ul>   <h2 id="version-0-11">Version 0.11</h2> <p>Released 2016-05-29, codename Absinthe</p> <ul class="simple"> <li>Added support to serializing top-level arrays to <code>flask.jsonify()</code>. This introduces a security risk in ancient browsers.</li> <li>Added before_render_template signal.</li> <li>Added <code>**kwargs</code> to <code>flask.Test.test_client()</code> to support passing additional keyword arguments to the constructor of <a class="reference internal" href="../api/index#flask.Flask.test_client_class" title="flask.Flask.test_client_class"><code>flask.Flask.test_client_class</code></a>.</li> <li>Added <code>SESSION_REFRESH_EACH_REQUEST</code> config key that controls the set-cookie behavior. If set to <code>True</code> a permanent session will be refreshed each request and get their lifetime extended, if set to <code>False</code> it will only be modified if the session actually modifies. Non permanent sessions are not affected by this and will always expire if the browser window closes.</li> <li>Made Flask support custom JSON mimetypes for incoming data.</li> <li>Added support for returning tuples in the form <code>(response,
headers)</code> from a view function.</li> <li>Added <code>flask.Config.from_json()</code>.</li> <li>Added <a class="reference internal" href="../api/index#flask.Flask.config_class" title="flask.Flask.config_class"><code>flask.Flask.config_class</code></a>.</li> <li>Added <a class="reference internal" href="../api/index#flask.Config.get_namespace" title="flask.Config.get_namespace"><code>flask.Config.get_namespace()</code></a>.</li> <li>Templates are no longer automatically reloaded outside of debug mode. This can be configured with the new <code>TEMPLATES_AUTO_RELOAD</code> config key.</li> <li>Added a workaround for a limitation in Python 3.3’s namespace loader.</li> <li>Added support for explicit root paths when using Python 3.3’s namespace packages.</li> <li>Added <strong class="command">flask</strong> and the <code>flask.cli</code> module to start the local debug server through the click CLI system. This is recommended over the old <code>flask.run()</code> method as it works faster and more reliable due to a different design and also replaces <code>Flask-Script</code>.</li> <li>Error handlers that match specific classes are now checked first, thereby allowing catching exceptions that are subclasses of HTTP exceptions (in <code>werkzeug.exceptions</code>). This makes it possible for an extension author to create exceptions that will by default result in the HTTP error of their choosing, but may be caught with a custom error handler if desired.</li> <li>Added <a class="reference internal" href="../api/index#flask.Config.from_mapping" title="flask.Config.from_mapping"><code>flask.Config.from_mapping()</code></a>.</li> <li>Flask will now log by default even if debug is disabled. The log format is now hardcoded but the default log handling can be disabled through the <code>LOGGER_HANDLER_POLICY</code> configuration key.</li> <li>Removed deprecated module functionality.</li> <li>Added the <code>EXPLAIN_TEMPLATE_LOADING</code> config flag which when enabled will instruct Flask to explain how it locates templates. This should help users debug when the wrong templates are loaded.</li> <li>Enforce blueprint handling in the order they were registered for template loading.</li> <li>Ported test suite to py.test.</li> <li>Deprecated <code>request.json</code> in favour of <code>request.get_json()</code>.</li> <li>Add “pretty” and “compressed” separators definitions in jsonify() method. Reduces JSON response size when <code>JSONIFY_PRETTYPRINT_REGULAR=False</code> by removing unnecessary white space included by default after separators.</li> <li>JSON responses are now terminated with a newline character, because it is a convention that UNIX text files end with a newline and some clients don’t deal well when this newline is missing. This came up originally as a part of <a class="reference external" href="https://github.com/postmanlabs/httpbin/issues/168">https://github.com/postmanlabs/httpbin/issues/168</a>. <a class="reference external" href="https://github.com/pallets/flask/pull/1262">#1262</a>
</li> <li>The automatically provided <code>OPTIONS</code> method is now correctly disabled if the user registered an overriding rule with the lowercase-version <code>options</code>. <a class="reference external" href="https://github.com/pallets/flask/issues/1288">#1288</a>
</li> <li>
<code>flask.json.jsonify</code> now supports the <code>datetime.date</code> type. <a class="reference external" href="https://github.com/pallets/flask/pull/1326">#1326</a>
</li> <li>Don’t leak exception info of already caught exceptions to context teardown handlers. <a class="reference external" href="https://github.com/pallets/flask/pull/1393">#1393</a>
</li> <li>Allow custom Jinja environment subclasses. <a class="reference external" href="https://github.com/pallets/flask/pull/1422">#1422</a>
</li> <li>Updated extension dev guidelines.</li> <li>
<code>flask.g</code> now has <code>pop()</code> and <code>setdefault</code> methods.</li> <li>Turn on autoescape for <code>flask.templating.render_template_string</code> by default. <a class="reference external" href="https://github.com/pallets/flask/pull/1515">#1515</a>
</li> <li>
<code>flask.ext</code> is now deprecated. <a class="reference external" href="https://github.com/pallets/flask/pull/1484">#1484</a>
</li> <li>
<code>send_from_directory</code> now raises BadRequest if the filename is invalid on the server OS. <a class="reference external" href="https://github.com/pallets/flask/pull/1763">#1763</a>
</li> <li>Added the <code>JSONIFY_MIMETYPE</code> configuration variable. <a class="reference external" href="https://github.com/pallets/flask/pull/1728">#1728</a>
</li> <li>Exceptions during teardown handling will no longer leave bad application contexts lingering around.</li> <li>Fixed broken <code>test_appcontext_signals()</code> test case.</li> <li>Raise an <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.9)"><code>AttributeError</code></a> in <code>flask.helpers.find_package()</code> with a useful message explaining why it is raised when a PEP 302 import hook is used without an <code>is_package()</code> method.</li> <li>Fixed an issue causing exceptions raised before entering a request or app context to be passed to teardown handlers.</li> <li>Fixed an issue with query parameters getting removed from requests in the test client when absolute URLs were requested.</li> <li>Made <code>@before_first_request</code> into a decorator as intended.</li> <li>Fixed an etags bug when sending a file streams with a name.</li> <li>Fixed <code>send_from_directory</code> not expanding to the application root path correctly.</li> <li>Changed logic of before first request handlers to flip the flag after invoking. This will allow some uses that are potentially dangerous but should probably be permitted.</li> <li>Fixed Python 3 bug when a handler from <code>app.url_build_error_handlers</code> reraises the <code>BuildError</code>.</li> </ul>   <h2 id="version-0-10-1">Version 0.10.1</h2> <p>Released 2013-06-14</p> <ul class="simple"> <li>Fixed an issue where <code>|tojson</code> was not quoting single quotes which made the filter not work properly in HTML attributes. Now it’s possible to use that filter in single quoted attributes. This should make using that filter with angular.js easier.</li> <li>Added support for byte strings back to the session system. This broke compatibility with the common case of people putting binary data for token verification into the session.</li> <li>Fixed an issue where registering the same method twice for the same endpoint would trigger an exception incorrectly.</li> </ul>   <h2 id="version-0-10">Version 0.10</h2> <p>Released 2013-06-13, codename Limoncello</p> <ul class="simple"> <li>Changed default cookie serialization format from pickle to JSON to limit the impact an attacker can do if the secret key leaks.</li> <li>Added <code>template_test</code> methods in addition to the already existing <code>template_filter</code> method family.</li> <li>Added <code>template_global</code> methods in addition to the already existing <code>template_filter</code> method family.</li> <li>Set the content-length header for x-sendfile.</li> <li>
<code>tojson</code> filter now does not escape script blocks in HTML5 parsers.</li> <li>
<code>tojson</code> used in templates is now safe by default due. This was allowed due to the different escaping behavior.</li> <li>Flask will now raise an error if you attempt to register a new function on an already used endpoint.</li> <li>Added wrapper module around simplejson and added default serialization of datetime objects. This allows much easier customization of how JSON is handled by Flask or any Flask extension.</li> <li>Removed deprecated internal <code>flask.session</code> module alias. Use <code>flask.sessions</code> instead to get the session module. This is not to be confused with <code>flask.session</code> the session proxy.</li> <li>Templates can now be rendered without request context. The behavior is slightly different as the <code>request</code>, <code>session</code> and <code>g</code> objects will not be available and blueprint’s context processors are not called.</li> <li>The config object is now available to the template as a real global and not through a context processor which makes it available even in imported templates by default.</li> <li>Added an option to generate non-ascii encoded JSON which should result in less bytes being transmitted over the network. It’s disabled by default to not cause confusion with existing libraries that might expect <code>flask.json.dumps</code> to return bytes by default.</li> <li>
<code>flask.g</code> is now stored on the app context instead of the request context.</li> <li>
<code>flask.g</code> now gained a <code>get()</code> method for not erroring out on non existing items.</li> <li>
<code>flask.g</code> now can be used with the <code>in</code> operator to see what’s defined and it now is iterable and will yield all attributes stored.</li> <li>
<code>flask.Flask.request_globals_class</code> got renamed to <code>flask.Flask.app_ctx_globals_class</code> which is a better name to what it does since 0.10.</li> <li>
<code>request</code>, <code>session</code> and <code>g</code> are now also added as proxies to the template context which makes them available in imported templates. One has to be very careful with those though because usage outside of macros might cause caching.</li> <li>Flask will no longer invoke the wrong error handlers if a proxy exception is passed through.</li> <li>Added a workaround for chrome’s cookies in localhost not working as intended with domain names.</li> <li>Changed logic for picking defaults for cookie values from sessions to work better with Google Chrome.</li> <li>Added <code>message_flashed</code> signal that simplifies flashing testing.</li> <li>Added support for copying of request contexts for better working with greenlets.</li> <li>Removed custom JSON HTTP exception subclasses. If you were relying on them you can reintroduce them again yourself trivially. Using them however is strongly discouraged as the interface was flawed.</li> <li>Python requirements changed: requiring Python 2.6 or 2.7 now to prepare for Python 3.3 port.</li> <li>Changed how the teardown system is informed about exceptions. This is now more reliable in case something handles an exception halfway through the error handling process.</li> <li>Request context preservation in debug mode now keeps the exception information around which means that teardown handlers are able to distinguish error from success cases.</li> <li>Added the <code>JSONIFY_PRETTYPRINT_REGULAR</code> configuration variable.</li> <li>Flask now orders JSON keys by default to not trash HTTP caches due to different hash seeds between different workers.</li> <li>Added <code>appcontext_pushed</code> and <code>appcontext_popped</code> signals.</li> <li>The builtin run method now takes the <code>SERVER_NAME</code> into account when picking the default port to run on.</li> <li>Added <code>flask.request.get_json()</code> as a replacement for the old <code>flask.request.json</code> property.</li> </ul>   <h2 id="version-0-9">Version 0.9</h2> <p>Released 2012-07-01, codename Campari</p> <ul class="simple"> <li>The <a class="reference internal" href="../api/index#flask.Request.on_json_loading_failed" title="flask.Request.on_json_loading_failed"><code>flask.Request.on_json_loading_failed()</code></a> now returns a JSON formatted response by default.</li> <li>The <a class="reference internal" href="../api/index#flask.url_for" title="flask.url_for"><code>flask.url_for()</code></a> function now can generate anchors to the generated links.</li> <li>The <a class="reference internal" href="../api/index#flask.url_for" title="flask.url_for"><code>flask.url_for()</code></a> function now can also explicitly generate URL rules specific to a given HTTP method.</li> <li>Logger now only returns the debug log setting if it was not set explicitly.</li> <li>Unregister a circular dependency between the WSGI environment and the request object when shutting down the request. This means that environ <code>werkzeug.request</code> will be <code>None</code> after the response was returned to the WSGI server but has the advantage that the garbage collector is not needed on CPython to tear down the request unless the user created circular dependencies themselves.</li> <li>Session is now stored after callbacks so that if the session payload is stored in the session you can still modify it in an after request callback.</li> <li>The <a class="reference internal" href="../api/index#flask.Flask" title="flask.Flask"><code>flask.Flask</code></a> class will avoid importing the provided import name if it can (the required first parameter), to benefit tools which build Flask instances programmatically. The Flask class will fall back to using import on systems with custom module hooks, e.g. Google App Engine, or when the import name is inside a zip archive (usually a .egg) prior to Python 2.7.</li> <li>Blueprints now have a decorator to add custom template filters application wide, <a class="reference internal" href="../api/index#flask.Blueprint.app_template_filter" title="flask.Blueprint.app_template_filter"><code>flask.Blueprint.app_template_filter()</code></a>.</li> <li>The Flask and Blueprint classes now have a non-decorator method for adding custom template filters application wide, <a class="reference internal" href="../api/index#flask.Flask.add_template_filter" title="flask.Flask.add_template_filter"><code>flask.Flask.add_template_filter()</code></a> and <a class="reference internal" href="../api/index#flask.Blueprint.add_app_template_filter" title="flask.Blueprint.add_app_template_filter"><code>flask.Blueprint.add_app_template_filter()</code></a>.</li> <li>The <a class="reference internal" href="../api/index#flask.get_flashed_messages" title="flask.get_flashed_messages"><code>flask.get_flashed_messages()</code></a> function now allows rendering flashed message categories in separate blocks, through a <code>category_filter</code> argument.</li> <li>The <a class="reference internal" href="../api/index#flask.Flask.run" title="flask.Flask.run"><code>flask.Flask.run()</code></a> method now accepts <code>None</code> for <code>host</code> and <code>port</code> arguments, using default values when <code>None</code>. This allows for calling run using configuration values, e.g. <code>app.run(app.config.get('MYHOST'), app.config.get('MYPORT'))</code>, with proper behavior whether or not a config file is provided.</li> <li>The <a class="reference internal" href="../api/index#flask.render_template" title="flask.render_template"><code>flask.render_template()</code></a> method now accepts a either an iterable of template names or a single template name. Previously, it only accepted a single template name. On an iterable, the first template found is rendered.</li> <li>Added <a class="reference internal" href="../api/index#flask.Flask.app_context" title="flask.Flask.app_context"><code>flask.Flask.app_context()</code></a> which works very similar to the request context but only provides access to the current application. This also adds support for URL generation without an active request context.</li> <li>View functions can now return a tuple with the first instance being an instance of <a class="reference internal" href="../api/index#flask.Response" title="flask.Response"><code>flask.Response</code></a>. This allows for returning <code>jsonify(error="error msg"), 400</code> from a view function.</li> <li>
<a class="reference internal" href="../api/index#flask.Flask" title="flask.Flask"><code>Flask</code></a> and <a class="reference internal" href="../api/index#flask.Blueprint" title="flask.Blueprint"><code>Blueprint</code></a> now provide a <a class="reference internal" href="../api/index#flask.Flask.get_send_file_max_age" title="flask.Flask.get_send_file_max_age"><code>get_send_file_max_age()</code></a> hook for subclasses to override behavior of serving static files from Flask when using <a class="reference internal" href="../api/index#flask.Flask.send_static_file" title="flask.Flask.send_static_file"><code>flask.Flask.send_static_file()</code></a> (used for the default static file handler) and <code>send_file()</code>. This hook is provided a filename, which for example allows changing cache controls by file extension. The default max-age for <code>send_file</code> and static files can be configured through a new <code>SEND_FILE_MAX_AGE_DEFAULT</code> configuration variable, which is used in the default <code>get_send_file_max_age</code> implementation.</li> <li>Fixed an assumption in sessions implementation which could break message flashing on sessions implementations which use external storage.</li> <li>Changed the behavior of tuple return values from functions. They are no longer arguments to the response object, they now have a defined meaning.</li> <li>Added <code>flask.Flask.request_globals_class</code> to allow a specific class to be used on creation of the <a class="reference internal" href="../api/index#flask.g" title="flask.g"><code>g</code></a> instance of each request.</li> <li>Added <code>required_methods</code> attribute to view functions to force-add methods on registration.</li> <li>Added <a class="reference internal" href="../api/index#flask.after_this_request" title="flask.after_this_request"><code>flask.after_this_request()</code></a>.</li> <li>Added <a class="reference internal" href="../api/index#flask.stream_with_context" title="flask.stream_with_context"><code>flask.stream_with_context()</code></a> and the ability to push contexts multiple times without producing unexpected behavior.</li> </ul>   <h2 id="version-0-8-1">Version 0.8.1</h2> <p>Released 2012-07-01</p> <ul class="simple"> <li>Fixed an issue with the undocumented <code>flask.session</code> module to not work properly on Python 2.5. It should not be used but did cause some problems for package managers.</li> </ul>   <h2 id="version-0-8">Version 0.8</h2> <p>Released 2011-09-29, codename Rakija</p> <ul class="simple"> <li>Refactored session support into a session interface so that the implementation of the sessions can be changed without having to override the Flask class.</li> <li>Empty session cookies are now deleted properly automatically.</li> <li>View functions can now opt out of getting the automatic OPTIONS implementation.</li> <li>HTTP exceptions and Bad Request errors can now be trapped so that they show up normally in the traceback.</li> <li>Flask in debug mode is now detecting some common problems and tries to warn you about them.</li> <li>Flask in debug mode will now complain with an assertion error if a view was attached after the first request was handled. This gives earlier feedback when users forget to import view code ahead of time.</li> <li>Added the ability to register callbacks that are only triggered once at the beginning of the first request. (<a class="reference internal" href="../api/index#flask.Flask.before_first_request" title="flask.Flask.before_first_request"><code>Flask.before_first_request()</code></a>)</li> <li>Malformed JSON data will now trigger a bad request HTTP exception instead of a value error which usually would result in a 500 internal server error if not handled. This is a backwards incompatible change.</li> <li>Applications now not only have a root path where the resources and modules are located but also an instance path which is the designated place to drop files that are modified at runtime (uploads etc.). Also this is conceptually only instance depending and outside version control so it’s the perfect place to put configuration files etc.</li> <li>Added the <code>APPLICATION_ROOT</code> configuration variable.</li> <li>Implemented <code>session_transaction()</code> to easily modify sessions from the test environment.</li> <li>Refactored test client internally. The <code>APPLICATION_ROOT</code> configuration variable as well as <code>SERVER_NAME</code> are now properly used by the test client as defaults.</li> <li>Added <a class="reference internal" href="../api/index#flask.views.View.decorators" title="flask.views.View.decorators"><code>flask.views.View.decorators</code></a> to support simpler decorating of pluggable (class-based) views.</li> <li>Fixed an issue where the test client if used with the “with” statement did not trigger the execution of the teardown handlers.</li> <li>Added finer control over the session cookie parameters.</li> <li>HEAD requests to a method view now automatically dispatch to the <code>get</code> method if no handler was implemented.</li> <li>Implemented the virtual <code>flask.ext</code> package to import extensions from.</li> <li>The context preservation on exceptions is now an integral component of Flask itself and no longer of the test client. This cleaned up some internal logic and lowers the odds of runaway request contexts in unittests.</li> <li>Fixed the Jinja2 environment’s <code>list_templates</code> method not returning the correct names when blueprints or modules were involved.</li> </ul>   <h2 id="version-0-7-2">Version 0.7.2</h2> <p>Released 2011-07-06</p> <ul class="simple"> <li>Fixed an issue with URL processors not properly working on blueprints.</li> </ul>   <h2 id="version-0-7-1">Version 0.7.1</h2> <p>Released 2011-06-29</p> <ul class="simple"> <li>Added missing future import that broke 2.5 compatibility.</li> <li>Fixed an infinite redirect issue with blueprints.</li> </ul>   <h2 id="version-0-7">Version 0.7</h2> <p>Released 2011-06-28, codename Grappa</p> <ul class="simple"> <li>Added <a class="reference internal" href="../api/index#flask.Flask.make_default_options_response" title="flask.Flask.make_default_options_response"><code>make_default_options_response()</code></a> which can be used by subclasses to alter the default behavior for <code>OPTIONS</code> responses.</li> <li>Unbound locals now raise a proper <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#RuntimeError" title="(in Python v3.9)"><code>RuntimeError</code></a> instead of an <a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AttributeError" title="(in Python v3.9)"><code>AttributeError</code></a>.</li> <li>Mimetype guessing and etag support based on file objects is now deprecated for <a class="reference internal" href="../api/index#flask.send_file" title="flask.send_file"><code>flask.send_file()</code></a> because it was unreliable. Pass filenames instead or attach your own etags and provide a proper mimetype by hand.</li> <li>Static file handling for modules now requires the name of the static folder to be supplied explicitly. The previous autodetection was not reliable and caused issues on Google’s App Engine. Until 1.0 the old behavior will continue to work but issue dependency warnings.</li> <li>Fixed a problem for Flask to run on jython.</li> <li>Added a <code>PROPAGATE_EXCEPTIONS</code> configuration variable that can be used to flip the setting of exception propagation which previously was linked to <code>DEBUG</code> alone and is now linked to either <code>DEBUG</code> or <code>TESTING</code>.</li> <li>Flask no longer internally depends on rules being added through the <code>add_url_rule</code> function and can now also accept regular werkzeug rules added to the url map.</li> <li>Added an <code>endpoint</code> method to the flask application object which allows one to register a callback to an arbitrary endpoint with a decorator.</li> <li>Use Last-Modified for static file sending instead of Date which was incorrectly introduced in 0.6.</li> <li>Added <code>create_jinja_loader</code> to override the loader creation process.</li> <li>Implemented a silent flag for <code>config.from_pyfile</code>.</li> <li>Added <code>teardown_request</code> decorator, for functions that should run at the end of a request regardless of whether an exception occurred. Also the behavior for <code>after_request</code> was changed. It’s now no longer executed when an exception is raised.</li> <li>Implemented <a class="reference internal" href="../api/index#flask.has_request_context" title="flask.has_request_context"><code>flask.has_request_context()</code></a>
</li> <li>Deprecated <code>init_jinja_globals</code>. Override the <a class="reference internal" href="../api/index#flask.Flask.create_jinja_environment" title="flask.Flask.create_jinja_environment"><code>create_jinja_environment()</code></a> method instead to achieve the same functionality.</li> <li>Added <a class="reference internal" href="../api/index#flask.safe_join" title="flask.safe_join"><code>flask.safe_join()</code></a>
</li> <li>The automatic JSON request data unpacking now looks at the charset mimetype parameter.</li> <li>Don’t modify the session on <a class="reference internal" href="../api/index#flask.get_flashed_messages" title="flask.get_flashed_messages"><code>flask.get_flashed_messages()</code></a> if there are no messages in the session.</li> <li>
<code>before_request</code> handlers are now able to abort requests with errors.</li> <li>It is not possible to define user exception handlers. That way you can provide custom error messages from a central hub for certain errors that might occur during request processing (for instance database connection errors, timeouts from remote resources etc.).</li> <li>Blueprints can provide blueprint specific error handlers.</li> <li>Implemented generic class-based views.</li> </ul>   <h2 id="version-0-6-1">Version 0.6.1</h2> <p>Released 2010-12-31</p> <ul class="simple"> <li>Fixed an issue where the default <code>OPTIONS</code> response was not exposing all valid methods in the <code>Allow</code> header.</li> <li>Jinja2 template loading syntax now allows “./” in front of a template load path. Previously this caused issues with module setups.</li> <li>Fixed an issue where the subdomain setting for modules was ignored for the static folder.</li> <li>Fixed a security problem that allowed clients to download arbitrary files if the host server was a windows based operating system and the client uses backslashes to escape the directory the files where exposed from.</li> </ul>   <h2 id="version-0-6">Version 0.6</h2> <p>Released 2010-07-27, codename Whisky</p> <ul class="simple"> <li>After request functions are now called in reverse order of registration.</li> <li>OPTIONS is now automatically implemented by Flask unless the application explicitly adds ‘OPTIONS’ as method to the URL rule. In this case no automatic OPTIONS handling kicks in.</li> <li>Static rules are now even in place if there is no static folder for the module. This was implemented to aid GAE which will remove the static folder if it’s part of a mapping in the .yml file.</li> <li>The <a class="reference internal" href="../api/index#flask.Flask.config" title="flask.Flask.config"><code>config</code></a> is now available in the templates as <code>config</code>.</li> <li>Context processors will no longer override values passed directly to the render function.</li> <li>Added the ability to limit the incoming request data with the new <code>MAX_CONTENT_LENGTH</code> configuration value.</li> <li>The endpoint for the <code>flask.Module.add_url_rule()</code> method is now optional to be consistent with the function of the same name on the application object.</li> <li>Added a <a class="reference internal" href="../api/index#flask.make_response" title="flask.make_response"><code>flask.make_response()</code></a> function that simplifies creating response object instances in views.</li> <li>Added signalling support based on blinker. This feature is currently optional and supposed to be used by extensions and applications. If you want to use it, make sure to have <a class="reference external" href="https://pypi.org/project/blinker/">blinker</a> installed.</li> <li>Refactored the way URL adapters are created. This process is now fully customizable with the <a class="reference internal" href="../api/index#flask.Flask.create_url_adapter" title="flask.Flask.create_url_adapter"><code>create_url_adapter()</code></a> method.</li> <li>Modules can now register for a subdomain instead of just an URL prefix. This makes it possible to bind a whole module to a configurable subdomain.</li> </ul>   <h2 id="version-0-5-2">Version 0.5.2</h2> <p>Released 2010-07-15</p> <ul class="simple"> <li>Fixed another issue with loading templates from directories when modules were used.</li> </ul>   <h2 id="version-0-5-1">Version 0.5.1</h2> <p>Released 2010-07-06</p> <ul class="simple"> <li>Fixes an issue with template loading from directories when modules where used.</li> </ul>   <h2 id="version-0-5">Version 0.5</h2> <p>Released 2010-07-06, codename Calvados</p> <ul class="simple"> <li>Fixed a bug with subdomains that was caused by the inability to specify the server name. The server name can now be set with the <code>SERVER_NAME</code> config key. This key is now also used to set the session cookie cross-subdomain wide.</li> <li>Autoescaping is no longer active for all templates. Instead it is only active for <code>.html</code>, <code>.htm</code>, <code>.xml</code> and <code>.xhtml</code>. Inside templates this behavior can be changed with the <code>autoescape</code> tag.</li> <li>Refactored Flask internally. It now consists of more than a single file.</li> <li>
<a class="reference internal" href="../api/index#flask.send_file" title="flask.send_file"><code>flask.send_file()</code></a> now emits etags and has the ability to do conditional responses builtin.</li> <li>(temporarily) dropped support for zipped applications. This was a rarely used feature and led to some confusing behavior.</li> <li>Added support for per-package template and static-file directories.</li> <li>Removed support for <code>create_jinja_loader</code> which is no longer used in 0.5 due to the improved module support.</li> <li>Added a helper function to expose files from any directory.</li> </ul>   <h2 id="version-0-4">Version 0.4</h2> <p>Released 2010-06-18, codename Rakia</p> <ul class="simple"> <li>Added the ability to register application wide error handlers from modules.</li> <li>
<a class="reference internal" href="../api/index#flask.Flask.after_request" title="flask.Flask.after_request"><code>after_request()</code></a> handlers are now also invoked if the request dies with an exception and an error handling page kicks in.</li> <li>Test client has not the ability to preserve the request context for a little longer. This can also be used to trigger custom requests that do not pop the request stack for testing.</li> <li>Because the Python standard library caches loggers, the name of the logger is configurable now to better support unittests.</li> <li>Added <code>TESTING</code> switch that can activate unittesting helpers.</li> <li>The logger switches to <code>DEBUG</code> mode now if debug is enabled.</li> </ul>   <h2 id="version-0-3-1">Version 0.3.1</h2> <p>Released 2010-05-28</p> <ul class="simple"> <li>Fixed a error reporting bug with <a class="reference internal" href="../api/index#flask.Config.from_envvar" title="flask.Config.from_envvar"><code>flask.Config.from_envvar()</code></a>
</li> <li>Removed some unused code from flask</li> <li>Release does no longer include development leftover files (.git folder for themes, built documentation in zip and pdf file and some .pyc files)</li> </ul>   <h2 id="version-0-3">Version 0.3</h2> <p>Released 2010-05-28, codename Schnaps</p> <ul class="simple"> <li>Added support for categories for flashed messages.</li> <li>The application now configures a <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Handler" title="(in Python v3.9)"><code>logging.Handler</code></a> and will log request handling exceptions to that logger when not in debug mode. This makes it possible to receive mails on server errors for example.</li> <li>Added support for context binding that does not require the use of the with statement for playing in the console.</li> <li>The request context is now available within the with statement making it possible to further push the request context or pop it.</li> <li>Added support for configurations.</li> </ul>   <h2 id="version-0-2">Version 0.2</h2> <p>Released 2010-05-12, codename J?germeister</p> <ul class="simple"> <li>Various bugfixes</li> <li>Integrated JSON support</li> <li>Added <a class="reference internal" href="../api/index#flask.get_template_attribute" title="flask.get_template_attribute"><code>get_template_attribute()</code></a> helper function.</li> <li>
<a class="reference internal" href="../api/index#flask.Flask.add_url_rule" title="flask.Flask.add_url_rule"><code>add_url_rule()</code></a> can now also register a view function.</li> <li>Refactored internal request dispatching.</li> <li>Server listens on 127.0.0.1 by default now to fix issues with chrome.</li> <li>Added external URL support.</li> <li>Added support for <a class="reference internal" href="../api/index#flask.send_file" title="flask.send_file"><code>send_file()</code></a>
</li> <li>Module support and internal request handling refactoring to better support pluggable applications.</li> <li>Sessions can be set to be permanent now on a per-session basis.</li> <li>Better error reporting on missing secret keys.</li> <li>Added support for Google Appengine.</li> </ul>   <h2 id="version-0-1">Version 0.1</h2> <p>Released 2010-04-16</p> <ul class="simple"> <li>First public preview release.</li> </ul><div class="_attribution">
  <p class="_attribution-p">
    &copy; 2007&ndash;2021 Pallets<br>Licensed under the BSD 3-clause License.<br>
    <a href="https://flask.palletsprojects.com/en/2.0.x/changes/" class="_attribution-link">https://flask.palletsprojects.com/en/2.0.x/changes/</a>
  </p>
</div>
